<script src="https://maps.googleapis.com/maps/api/js"></script>
<script>

  /**
   * Adds a KMLLayer based on the URL passed. Clicking on a marker
   * results in the balloon content being loaded into the right-hand div.
   * @param {string} src A URL for a KML file.
   */
  function loadKmlLayer(src, map) {
    var kmlLayer = new google.maps.KmlLayer(src, {
      suppressInfoWindows: true,
      preserveViewport: false,
      map: map
    });

    google.maps.event.addListener(kmlLayer, "metadata_changed", function() {
      console.debug("metadata_changed");
      console.debug(kmlLayer.getMetadata());
      $("#title").text(kmlLayer.getMetadata().name);
    });

    google.maps.event.addListener(kmlLayer, 'click', function(event) {
      var content = event.featureData.infoWindowHtml;
      $("#description").html(content);
      console.debug(content);
    });
  }

  google.maps.event.addDomListener(window, 'load', initialize);

</script>