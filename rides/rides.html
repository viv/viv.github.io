---
layout: default
title: Rides
menu: rides
---

<script>
  var mapFiles = [];
</script>

<div id="home">
  <h1>Rides</h1>

  {% for ride in site.data.rides reversed %}

  <div class="ride panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">{{ ride.name }} <small>{{ ride.date }}</small></h3>
    </div>
    <div class="panel-body">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Distance</th>
            <th>Duration</th>
            <th>Average Speed</th>
            <th class="hidden-xs">Min Altitude</th>
            <th class="hidden-xs">Max Altitude</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ ride.distance }}</td>
            <td>{{ ride.duration }}</td>
            <td>{{ ride.averageSpeed }}</td>
            <td class="hidden-xs">{{ ride.minimumAltitude }}</td>
            <td class="hidden-xs">{{ ride.maximumAltitude }}</td>
          </tr>
        </tbody>
      </table>

      <div class="map_canvas" id="map_{{ride.filename}}"></div>
      <script>
        mapFiles.push("{{ride.filename}}");
      </script>
    </div>
  </div>
  {% endfor %}
</div>


<script>
  /**
   * Initializes the map and calls the function that creates polylines.
   */
  function initialize(mapFiles) {

    var mapOptions = {
      center: new google.maps.LatLng(52.023762, -3.377263),
      zoom: 2,
      mapTypeId: google.maps.MapTypeId.TERRAIN
    }

    mapFiles.forEach(function(name) {
      var src = "{{site.url}}/rides/data/" + name;
      var mapCanvas = "map_" + name;
      var map = new google.maps.Map(document.getElementById(mapCanvas), mapOptions);
      loadKmlLayer(src, map);
    });
  }
</script>
